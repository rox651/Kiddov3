---
import { GetAllProjectsUseCase } from "../../usecases/project/GetAllProjectsUseCase";

import Layout from "../../components/layout/Layout.astro";
import ProjectDetails from "../../views/project/ProjectDetails.astro";
import ProjectContent from "../../views/project/ProjectContent.astro";
import ProjectShowCase from "../../components/common/project/ProjectShowCase.astro";

export async function getStaticPaths() {
  const projects = await GetAllProjectsUseCase();

  return projects.map(({ slug, ...restOfProps }) => {
    return {
      params: { slug },
      props: restOfProps,
    };
  });
}

const {
  title,
  solution_details,
  case_details,
  categories,
  content,
  social_links,
} = Astro.props;
---

<Layout>
   <ProjectDetails
      title={title}
      caseDetails={case_details}
      solutionDetails={solution_details}
      categories={categories}
      socialLinks={social_links}
   />

   <ProjectContent title={title} content={content} />

   <ProjectShowCase />
</Layout>
